---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import BlogCard from "../../components/BlogCard.astro";

type Blog = CollectionEntry<"blog">;
const allBlogPosts = await getCollection("blog", ({ data }) => {
    return data.unlisted == false;
});
---

<style>
    ol {
        width: 50%;
        height: 50%;
        padding: 2em 0;
        margin: 0;
        flex: 1;
        list-style: none;
        display: flex;
        flex-direction: column;
    }
    ol a,
    ol a.active {
        text-decoration: none;
        display: block;
        min-height: 120px;
    }
    ol a + a {
        border-top: 1px solid
            color-mix(in oklab, var(--accent-2) 30%, transparent);
    }

    @media (max-width: 768px) {
        ol {
            width: 90%;
            margin: 0 auto;
            padding: 1rem 0;
        }
    }
</style>

<Layout>
    <ol>
        {
            allBlogPosts.map((blog: Blog) => {
                return (
                    <a href={`/blog/${blog.id}`}>
                        <BlogCard blog_data={blog.data} />
                    </a>
                );
            })
        }
    </ol>
</Layout>
